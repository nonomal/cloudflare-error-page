#!/usr/bin/env node
/*
 * JavaScript Example: Render and serve the Cloudflare error page using Express server
 *
 * Prerequisites:
 *   npm install express cloudflare-error-page
 */

import express from 'express';
import { render } from 'cloudflare-error-page';

const app = express();
const port = 3000;

<%# TODO: use the library as middleware? _%>
// Define a route for GET requests to the root URL
app.get('/', (req, res) => {
  // Render the error page and send to client
  res.status(<%= errorCode %>).send(render(<%- indentedParams %>));
});

// Start the server and listen on the specified port
app.listen(port, () => {
  console.log(`Example app listening at http://localhost:${port}`);
});
